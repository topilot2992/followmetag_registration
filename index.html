<script>
  document.getElementById("writeButton").addEventListener("click", async () => {
    const text = document.getElementById("textInput").value.trim();
    const status = document.getElementById("status");

    try {
      // Wichtig: Prüfung erst *nach* Klick
      if (!("NDEFWriter" in window)) {
        status.textContent = "Web NFC wird nicht unterstützt oder blockiert.";
        return;
      }

      const writer = new NDEFWriter();
      await writer.write(text);
      status.textContent = "Erfolgreich geschrieben!";
    } catch (err) {
      status.textContent = "Fehler: " + err.message;
    }
  });
</script>
