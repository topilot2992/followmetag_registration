<script>
  document.getElementById("writeButton").addEventListener("click", async () => {
    const text = document.getElementById("textInput").value.trim();
    const status = document.getElementById("status");

    if (!("NDEFWriter" in window)) {
      status.textContent = "Web NFC wird von diesem Gerät nicht unterstützt.";
      return;
    }

    if (!text) {
      status.textContent = "Bitte Text eingeben.";
      return;
    }

    try {
      const writer = new NDEFWriter();

      // Versuche zuerst mit einfachem Text
      await writer.write(text);

      // Wenn das nicht geht, kannst du alternativ dies probieren:
      // await writer.write({
      //   records: [{
      //     recordType: "text",
      //     data: new TextEncoder().encode(text),
      //     lang: "de"
      //   }]
      // });

      status.textContent = "Erfolgreich geschrieben!";
    } catch (err) {
      console.error("Fehler beim Schreiben:", err);
      status.textContent = "Fehler: " + err.message;
    }
  });
</script>
